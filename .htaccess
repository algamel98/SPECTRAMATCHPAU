# =============================================================================
# SpectraMatch — .htaccess for JPaaS (Apache + mod_wsgi)
# =============================================================================
#
# This file configures directives that .htaccess is allowed to set.
# NOTE: WSGIDaemonProcess / WSGIProcessGroup / WSGIApplicationGroup directives
# can ONLY be set in server config (httpd.conf), NOT in .htaccess.
# See jpaas/httpd-wsgi.conf for those critical directives.
#
# NOTE: RequestReadTimeout is a server-level directive and is NOT allowed in
# .htaccess on JPaaS.  Set it in httpd.conf instead (see jpaas/httpd-wsgi.conf).
# =============================================================================

# --- Disable MultiViews to avoid content-negotiation conflicts ---
Options -MultiViews

# --- Deny access to hidden/internal files ---
<FilesMatch "^\.">
    Require all denied
</FilesMatch>

# --- Deny access to compiled Python bytecode (not needed by WSGI) ---
# NOTE: Do NOT deny .py files here — WSGIScriptAlias needs Apache to
# access wsgi.py internally.  Apache will not serve .py as static files
# when WSGIScriptAlias / is active.
<FilesMatch "\.(pyc|pyo)$">
    Require all denied
</FilesMatch>

# --- Allow .well-known for SSL certificate renewal ---
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteRule "^\.well-known/" - [L]
</IfModule>

# --- Compress text responses ---
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE application/json text/html text/css application/javascript
</IfModule>
